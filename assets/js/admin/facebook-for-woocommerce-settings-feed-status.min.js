"use strict";jQuery(document).ready(function(t){function e(e){this.$form=e,this.xhr=!1,this.$form.find(".facebook-woocommerce-feed-generator-progress").val(facebook_for_woocommerce_feed_status.generation_progress),this.processStep=this.processStep.bind(this),this.feedFileInfo=this.feedFileInfo.bind(this),this.feedFileInfo(facebook_for_woocommerce_feed_status.file),e.on("submit",{feedGenerationForm:this},this.onSubmit),facebook_for_woocommerce_feed_status.generation_in_progress?(this.$form.find(".facebook-for-woocommerce-feed-status-is-generating").show(),this.$form.find(".facebook-woocommerce-feed-generator-button").prop("disabled",!0),this.processStep()):this.$form.find(".spinner").removeClass("is-active")}e.prototype.onSubmit=function(e){e.preventDefault(),e.data.feedGenerationForm.$form.addClass("woocommerce-exporter__exporting"),e.data.feedGenerationForm.$form.find(".spinner").addClass("is-active"),e.data.feedGenerationForm.$form.find(".facebook-woocommerce-feed-generator-progress").val(0),e.data.feedGenerationForm.$form.find(".facebook-for-woocommerce-feed-status-processed").text(0),e.data.feedGenerationForm.$form.find(".facebook-woocommerce-feed-generator-button").prop("disabled",!0),e.data.feedGenerationForm.processStep(!0)},e.prototype.feedFileInfo=function(e){var o;null!==e&&(o=new Date(parseInt(1e3*e.start)),this.$form.find(".facebook-for-woocommerce-feed-file-started").text(o.toString()),o=new Date(parseInt(1e3*e.end)),this.$form.find(".facebook-for-woocommerce-feed-file-ended").text(o.toString()),this.$form.find(".facebook-for-woocommerce-feed-file-processing-duration").text(((parseInt(e.end)-parseInt(e.start))/60).toFixed(2)),this.$form.find(".facebook-for-woocommerce-feed-file-items-count").text(e.total),this.$form.find(".facebook-for-woocommerce-feed-file-size").text(e.size),this.$form.find(".facebook-for-woocommerce-feed-file-location").text(e.location),this.$form.find(".facebook-for-woocommerce-feed-status-file-info").show())},e.prototype.processStep=function(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0],o=this;t.ajax({type:"POST",url:facebook_for_woocommerce_feed_status.ajax_url,data:{action:"facebook_for_woocommerce_do_ajax_feed",security:facebook_for_woocommerce_feed_status.feed_generation_nonce,generate:e},dataType:"json",success:function(e){e.success&&(e.data.done?setTimeout(function(){o.$form.removeClass("woocommerce-exporter__exporting"),o.$form.find(".facebook-woocommerce-feed-generator-button").prop("disabled",!1),o.$form.find(".spinner").removeClass("is-active"),o.$form.find(".facebook-for-woocommerce-feed-status-is-generating").hide()},2e3):(o.$form.find(".facebook-for-woocommerce-feed-status-is-generating").show(),setTimeout(function(){o.processStep()},1e4)),o.$form.find(".facebook-woocommerce-feed-generator-progress").val(e.data.percentage),o.$form.find(".facebook-for-woocommerce-feed-status-processed").text(e.data.page),o.$form.find(".facebook-for-woocommerce-feed-status-total").text(e.data.total),o.feedFileInfo(e.data.file))}}).fail(function(e){window.console.log(e)})},t.fn.wc_product_export_form=function(){return new e(this),this},t(".facebook-for-woocommerce-feed-generator").wc_product_export_form()});
//# sourceMappingURL=facebook-for-woocommerce-settings-feed-status.min.js.map
